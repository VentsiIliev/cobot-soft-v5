# –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∑–∞ Modbus –ù–∞—Å—Ç—Ä–æ–π–∫–∏
## –°—ä–¥—ä—Ä–∂–∞–Ω–∏–µ
1. [–ü—Ä–µ–≥–ª–µ–¥](#–ø—Ä–µ–≥–ª–µ–¥)
2. [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)
3. [–ü–æ—Ç–æ–∫–∞ –Ω–∞ –î–∞–Ω–Ω–∏—Ç–µ](#–ø–æ—Ç–æ–∫–∞-–Ω–∞-–¥–∞–Ω–Ω–∏—Ç–µ)
4. [–§–∞–π–ª–æ–≤–∞ –°—Ç—Ä—É–∫—Ç—É—Ä–∞](#—Ñ–∞–π–ª–æ–≤–∞-—Å—Ç—Ä—É–∫—Ç—É—Ä–∞)
5. [API Endpoints](#api-endpoints)
6. [–ö–æ–º–ø–æ–Ω–µ–Ω—Ç–∏](#–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏)
7. [–ü—Ä–∏–º–µ—Ä–∏ –∑–∞ –ò–∑–ø–æ–ª–∑–≤–∞–Ω–µ](#–ø—Ä–∏–º–µ—Ä–∏-–∑–∞-–∏–∑–ø–æ–ª–∑–≤–∞–Ω–µ)
---
## –ü—Ä–µ–≥–ª–µ–¥
–°–∏—Å—Ç–µ–º–∞—Ç–∞ –∑–∞ Modbus –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–º–ø–ª–µ–º–µ–Ω—Ç–∏—Ä–∞ –ø—ä–ª–µ–Ω —Ü–∏–∫—ä–ª –Ω–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –æ—Ç –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—Å–∫–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ—Ç–æ –Ω–∞ –¥–∞–Ω–Ω–∏, —Å–ª–µ–¥–≤–∞–π–∫–∏ Repository Pattern –∑–∞ –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç —Å –æ—Å—Ç–∞–Ω–∞–ª–∞—Ç–∞ —á–∞—Å—Ç –æ—Ç –ø—Ä–æ–µ–∫—Ç–∞.
### –û—Å–Ω–æ–≤–Ω–∏ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–Ω–æ—Å—Ç–∏
- ‚úÖ –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–∞–Ω–µ –Ω–∞ Modbus RTU –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–∞–ø–∞–∑–≤–∞–Ω–µ –Ω–∞ –ø—Ä–æ–º–µ–Ω–∏—Ç–µ
- ‚úÖ –û—Ç–∫—Ä–∏–≤–∞–Ω–µ –Ω–∞ –Ω–∞–ª–∏—á–µ–Ω —Å–µ—Ä–∏–µ–Ω –ø–æ—Ä—Ç
- ‚úÖ –¢–µ—Å—Ç–≤–∞–Ω–µ –Ω–∞ –≤—Ä—ä–∑–∫–∞—Ç–∞
- ‚úÖ –¢–∞–±—É–ª–∏—Ä–∞–Ω –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å Connection –∏ Devices —Å–µ–∫—Ü–∏–∏
- ‚úÖ –ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ —Å—ä—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ JSON —Ñ–æ—Ä–º–∞—Ç
---
## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
–°–∏—Å—Ç–µ–º–∞—Ç–∞ —Å–ª–µ–¥–≤–∞ –º–Ω–æ–≥–æ—Å–ª–æ–π–Ω–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    UI Layer (Frontend)                       ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ ModbusSettingsAppWidget                               ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îî‚îÄ ModbusSettingsContent (Tabs)                      ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ      ‚îú‚îÄ ModbusConnectionTab (Connection Settings)     ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ      ‚îî‚îÄ ModbusDevicesTab (Device Management)          ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                            ‚Üì‚Üë (controller_service)
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                   Service Layer (SettingsService)            ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ ControllerService.settings (SettingsService)          ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îú‚îÄ get_modbus_settings()                             ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îú‚îÄ update_modbus_setting(field, value)               ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îú‚îÄ test_modbus_connection()                          ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îî‚îÄ detect_modbus_port()                              ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                            ‚Üì‚Üë (via RequestSender)
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ              Communication Layer (API Gateway)               ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ Controller ‚Üí RequestSender                            ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îî‚îÄ MainRouter (dispatch requests)                    ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ      ‚îî‚îÄ SettingsDispatcher                            ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ          ‚îî‚îÄ handle_modbus_settings()                  ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                            ‚Üì‚Üë (repository)
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                  Data Access Layer (Repository)              ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ ModbusSettingsRepository                              ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îî‚îÄ BaseJsonSettingsRepository                        ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ      ‚îú‚îÄ load() - –ó–∞—Ä–µ–∂–¥–∞–Ω–µ –æ—Ç JSON                    ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ      ‚îú‚îÄ save() - –ó–∞–ø–∞–∑–≤–∞–Ω–µ –≤ JSON                     ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ      ‚îî‚îÄ update_field() - –ê–∫—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞ –ø–æ–ª–µ         ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                            ‚Üì‚Üë (file I/O)
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                     Model Layer (Data)                       ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ ModbusConfig (dataclass)                              ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  - port: str                                          ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  - baudrate: int                                      ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  - bytesize: int                                      ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  - stopbits: int                                      ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  - parity: str                                        ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  - timeout: float                                     ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  - slave_address: int                                 ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  - max_retries: int                                   ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                            ‚Üì‚Üë
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    File System (Storage)                     ‚îÇ
‚îÇ  ~/.cache/cobot-glue-dispensing-v5/                         ‚îÇ
‚îÇ    glue_dispensing_application/storage/settings/             ‚îÇ
‚îÇ      modbus_config.json                                      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```
---
## –ü–æ—Ç–æ–∫–∞ –Ω–∞ –î–∞–Ω–Ω–∏—Ç–µ
### 1. –ó–∞—Ä–µ–∂–¥–∞–Ω–µ –Ω–∞ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (UI ‚Üí Storage)
```
[1] –ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è—Ç –æ—Ç–≤–∞—Ä—è Modbus Settings
      ‚Üì
[2] ModbusConnectionTab.__init__()
      ‚Üì
[3] _load_settings_from_endpoints()
      ‚Üì
[4] controller_service.settings.get_modbus_settings()
      ‚Üì
[5] SettingsService.get_modbus_settings()
      ‚Üì
[6] controller.requestSender.send_request(MODBUS_CONFIG_GET)
      ‚Üì
[7] SettingsDispatcher.handle_modbus_settings()
      ‚Üì
[8] ModbusSettingsRepository.load()
      ‚Üì
[9] –ß–µ—Ç–µ modbus_config.json –æ—Ç –¥–∏—Å–∫–∞
      ‚Üì
[10] ModbusConfig.from_dict(json_data)
      ‚Üì
[11] –í—Ä—ä—â–∞ Response —Å—ä—Å success –∏ config data
      ‚Üì
[12] ServiceResult –æ–±–≥—Ä—ä—â–∞ response-–∞
      ‚Üì
[13] UI –ø–æ–ø—ä–ª–≤–∞ –ø–æ–ª–µ—Ç–∞—Ç–∞ —Å –ø–æ–ª—É—á–µ–Ω–∏—Ç–µ –¥–∞–Ω–Ω–∏
```
**–ü—Ä–∏–º–µ—Ä –∫–æ–¥:**
```python
# –í ModbusConnectionTab.py
result = self.controller_service.settings.get_modbus_settings()
if result.success:
    self.config = result.data  # {'port': 'COM5', 'baudrate': 115200, ...}
```
### 2. –ê–∫—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (UI ‚Üí Storage)
```
[1] –ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è—Ç –ø—Ä–æ–º–µ–Ω—è —Å—Ç–æ–π–Ω–æ—Å—Ç (–Ω–∞–ø—Ä. baudrate)
      ‚Üì
[2] Signal —Å–µ –∑–∞–¥–µ–π—Å—Ç–≤–∞: baudrate_dropdown.currentTextChanged
      ‚Üì
[3] _on_field_changed('baudrate', 115200)
      ‚Üì
[4] controller_service.settings.update_modbus_setting('baudrate', 115200)
      ‚Üì
[5] SettingsService.update_modbus_setting()
      ‚Üì
[6] controller.requestSender.send_request(MODBUS_CONFIG_UPDATE,
                                          data={'field': 'baudrate', 'value': 115200})
      ‚Üì
[7] SettingsDispatcher.handle_modbus_settings()
      ‚Üì
[8] ModbusSettingsRepository.update_field('baudrate', 115200)
      ‚Üì
[9] –ó–∞—Ä–µ–∂–¥–∞ —Ç–µ–∫—É—â–∏—è config –æ—Ç —Ñ–∞–π–ª–∞
      ‚Üì
[10] config.update_field('baudrate', 115200)
      ‚Üì
[11] –ó–∞–ø–∞–∑–≤–∞ –∞–∫—Ç—É–∞–ª–∏–∑–∏—Ä–∞–Ω–∏—è config –æ–±—Ä–∞—Ç–Ω–æ –≤ JSON —Ñ–∞–π–ª–∞
      ‚Üì
[12] –í—Ä—ä—â–∞ Response —Å—ä—Å success message
      ‚Üì
[13] ServiceResult –æ–±–≥—Ä—ä—â–∞ response-–∞
      ‚Üì
[14] UI –ø–æ–∫–∞–∑–≤–∞ toast –Ω–æ—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è "‚úÖ Baudrate updated"
```
**–ü—Ä–∏–º–µ—Ä –∫–æ–¥:**
```python
# –í ModbusConnectionTab.py
def _on_field_changed(self, field, value):
    result = self.controller_service.settings.update_modbus_setting(field, value)
    if result.success:
        self.config[field] = value
        self.showToast(f"‚úÖ {field} updated")
    # –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–∞–ø–∞–∑–≤–∞–Ω–µ –ø—Ä–∏ –≤—Å—è–∫–∞ –ø—Ä–æ–º—è–Ω–∞
```
### 3. –û—Ç–∫—Ä–∏–≤–∞–Ω–µ –Ω–∞ –ü–æ—Ä—Ç (UI ‚Üí System ‚Üí UI)
```
[1] –ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è—Ç –∫–ª–∏–∫–≤–∞ "Detect Port"
      ‚Üì
[2] _on_detect_port()
      ‚Üì
[3] –ë—É—Ç–æ–Ω—ä—Ç —Å–µ –¥–µ–∞–∫—Ç–∏–≤–∏—Ä–∞, —Ç–µ–∫—Å—Ç—ä—Ç —Å—Ç–∞–≤–∞ "Detecting..."
      ‚Üì
[4] controller_service.settings.detect_modbus_port()
      ‚Üì
[5] SettingsService.detect_modbus_port()
      ‚Üì
[6] controller.requestSender.send_request(MODBUS_GET_AVAILABLE_PORT)
      ‚Üì
[7] SettingsDispatcher.handle_modbus_settings()
      ‚Üì
[8] platform.system() –ø—Ä–æ–≤–µ—Ä–∫–∞
      ‚îú‚îÄ Windows: –≤—Ä—ä—â–∞ "COM5"
      ‚îî‚îÄ Linux: –∏–∑–≤–∏–∫–≤–∞ get_modbus_port(sudo_password)
      ‚Üì
[9] get_modbus_port() –∏–∑–≤–∏–∫–≤–∞ —Å–∏—Å—Ç–µ–º–Ω–∞ –∫–æ–º–∞–Ω–¥–∞
      - –¢—ä—Ä—Å–∏ /dev/ttyUSB* —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
      - –í—Ä—ä—â–∞ –æ—Ç–∫—Ä–∏—Ç–∏—è –ø–æ—Ä—Ç –∏–ª–∏ –ø—Ä–∞–∑–µ–Ω string
      ‚Üì
[10] –í—Ä—ä—â–∞ Response —Å port data: {"port": "/dev/ttyUSB0"}
      ‚Üì
[11] ServiceResult –æ–±–≥—Ä—ä—â–∞ response-–∞
      ‚Üì
[12] UI –ø–æ–ø—ä–ª–≤–∞ port_input –ø–æ–ª–µ—Ç–æ
      ‚Üì
[13] –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Å–µ –∑–∞–¥–µ–π—Å—Ç–≤–∞ _on_field_changed('port', '/dev/ttyUSB0')
      ‚Üì
[14] –ù–æ–≤–∏—è—Ç –ø–æ—Ä—Ç —Å–µ –∑–∞–ø–∞–∑–≤–∞ –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è—Ç–∞
      ‚Üì
[15] Toast –Ω–æ—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è: "‚úÖ Port detected: /dev/ttyUSB0"
      ‚Üì
[16] –ë—É—Ç–æ–Ω—ä—Ç —Å–µ –∞–∫—Ç–∏–≤–∏—Ä–∞ –æ—Ç–Ω–æ–≤–æ
```
### 4. –¢–µ—Å—Ç–≤–∞–Ω–µ –Ω–∞ –í—Ä—ä–∑–∫–∞ (UI ‚Üí ModbusClient ‚Üí UI)
```
[1] –ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è—Ç –∫–ª–∏–∫–≤–∞ "Test Connection"
      ‚Üì
[2] _on_test_connection()
      ‚Üì
[3] Status label: "Testing connection..."
      ‚Üì
[4] controller_service.settings.test_modbus_connection()
      ‚Üì
[5] SettingsService.test_modbus_connection()
      ‚Üì
[6] controller.requestSender.send_request(MODBUS_TEST_CONNECTION)
      ‚Üì
[7] SettingsDispatcher.handle_modbus_settings()
      ‚Üì
[8] ModbusSettingsRepository.load() - –∑–∞—Ä–µ–∂–¥–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è—Ç–∞
      ‚Üì
[9] –°—ä–∑–¥–∞–≤–∞ —Ç–µ—Å—Ç–æ–≤ ModbusClient —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∏—Ç–µ –æ—Ç config
      ‚Üì
[10] ModbusClient –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–∞ serial connection
      ‚îú‚îÄ Success: –≤—Ä—ä–∑–∫–∞—Ç–∞ –µ —É—Å–ø–µ—à–Ω–∞
      ‚îî‚îÄ Error: —Ö–≤—ä—Ä–ª—è –∏–∑–∫–ª—é—á–µ–Ω–∏–µ (timeout, connection refused, etc.)
      ‚Üì
[11] –ó–∞—Ç–≤–∞—Ä—è —Ç–µ—Å—Ç–æ–≤–∞—Ç–∞ –≤—Ä—ä–∑–∫–∞
      ‚Üì
[12] –í—Ä—ä—â–∞ Response —Å—ä—Å success/error
      ‚Üì
[13] ServiceResult –æ–±–≥—Ä—ä—â–∞ response-–∞
      ‚Üì
[14] UI –∞–∫—Ç—É–∞–ª–∏–∑–∏—Ä–∞ status label
      ‚îú‚îÄ Success: "‚úÖ Connection successful!"
      ‚îî‚îÄ Error: "‚ùå Connection failed: [error message]"
      ‚Üì
[15] Toast –Ω–æ—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —Å —Ä–µ–∑—É–ª—Ç–∞—Ç–∞
```
### 5. –ò–∑–ø–æ–ª–∑–≤–∞–Ω–µ –æ—Ç ModbusController (Runtime)
```
[1] –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ—Ç–æ —Å–µ –Ω—É–∂–¥–∞–µ –æ—Ç Modbus –∫–ª–∏–µ–Ω—Ç
      ‚Üì
[2] ModbusController.getModbusClient(slaveId=10)
      ‚Üì
[3] load_modbus_config_from_repo()
      ‚Üì
[4] ModbusSettingsRepository.load()
      ‚Üì
[5] –ß–µ—Ç–µ modbus_config.json
      ‚Üì
[6] –í—Ä—ä—â–∞ ModbusConfig –æ–±–µ–∫—Ç
      ‚Üì
[7] get_config_from_settings()
      ‚Üì
[8] –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–∞ ModbusConfig ‚Üí ModbusClientConfig
      - –ú–∞p–≤–∞ parity: 'N' ‚Üí ModbusParity.NONE
      - –ê–∫–æ port='COM5' (Linux): –∏–∑–≤–∏–∫–≤–∞ get_modbus_port()
      ‚Üì
[9] –°—ä–∑–¥–∞–≤–∞ ModbusClient —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∏—Ç–µ
      - serial.baudrate = config.baudrate
      - serial.bytesize = config.bytesize
      - serial.parity = config.parity.value
      - –∏ —Ç.–Ω.
      ‚Üì
[10] –í—Ä—ä—â–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–∞–Ω ModbusClient –≥–æ—Ç–æ–≤ –∑–∞ –∏–∑–ø–æ–ª–∑–≤–∞–Ω–µ
```
---
## –§–∞–π–ª–æ–≤–∞ –°—Ç—Ä—É–∫—Ç—É—Ä–∞
### Frontend (UI Layer)
```
src/plugins/core/modbus_settings_plugin/
‚îú‚îÄ‚îÄ __init__.py
‚îú‚îÄ‚îÄ plugin.py                          # –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–∞ plugin
‚îÇ
‚îú‚îÄ‚îÄ ui/
‚îÇ   ‚îú‚îÄ‚îÄ ModbusSettingsAppWidget.py     # –ì–ª–∞–≤–µ–Ω widget –Ω–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ—Ç–æ
‚îÇ   ‚îú‚îÄ‚îÄ ModbusSettingsContent.py       # Tab –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
‚îÇ   ‚îú‚îÄ‚îÄ ModbusConnectionTab.py         # Connection –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ UI
‚îÇ   ‚îú‚îÄ‚îÄ ModbusDevicesTab.py            # Devices —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ UI
‚îÇ   ‚îî‚îÄ‚îÄ ModbusSettingsTabLayout.py     # (deprecated - –∑–∞–º–µ–Ω–µ–Ω —Å –≥–æ—Ä–Ω–∏—Ç–µ)
‚îÇ
‚îî‚îÄ‚îÄ icons/
    ‚îú‚îÄ‚îÄ modbus_connection.png
    ‚îî‚îÄ‚îÄ modbus_devices.png
```
### Communication Layer (API & Routing)
```
src/communication_layer/
‚îú‚îÄ‚îÄ api/v1/endpoints/
‚îÇ   ‚îî‚îÄ‚îÄ modbus_endpoints.py            # –î–µ—Ñ–∏–Ω–∏—Ü–∏–∏ –Ω–∞ endpoints
‚îÇ
‚îú‚îÄ‚îÄ api/v1/
‚îÇ   ‚îî‚îÄ‚îÄ Response.py                    # Response wrapper –∫–ª–∞—Å
‚îÇ
‚îî‚îÄ‚îÄ api_gateway/
    ‚îú‚îÄ‚îÄ DomesticRequestSender.py       # Request sender
    ‚îÇ
    ‚îî‚îÄ‚îÄ dispatch/
        ‚îú‚îÄ‚îÄ main_router.py             # –ì–ª–∞–≤–µ–Ω –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ç–æ—Ä
        ‚îî‚îÄ‚îÄ settings_dispatcher.py     # Modbus handler –ª–æ–≥–∏–∫–∞
```
### Data Access Layer (Repository)
```
src/core/database/settings/
‚îú‚îÄ‚îÄ BaseJsonSettingsRepository.py      # –ë–∞–∑–æ–≤ –∫–ª–∞—Å –∑–∞ JSON repositories
‚îú‚îÄ‚îÄ ModbusSettingsRepository.py        # Modbus repository –∏–º–ø–ª–µ–º–µ–Ω—Ç–∞—Ü–∏—è
‚îú‚îÄ‚îÄ RobotSettingsRepository.py         # (—Å—ä—â–∏—è—Ç pattern)
‚îî‚îÄ‚îÄ CameraSettingsRepository.py        # (—Å—ä—â–∏—è—Ç pattern)
```
### Model Layer (Data Structures)
```
src/core/model/settings/
‚îî‚îÄ‚îÄ modbusConfig/
    ‚îú‚îÄ‚îÄ __init__.py
    ‚îî‚îÄ‚îÄ modbusConfigModel.py           # ModbusConfig dataclass
```
### Business Logic (ModbusController)
```
src/modules/modbusCommunication/
‚îú‚îÄ‚îÄ __init__.py
‚îú‚îÄ‚îÄ ModbusController.py                # Factory –∑–∞ Modbus –∫–ª–∏–µ–Ω—Ç–∏
‚îú‚îÄ‚îÄ ModbusClient.py                    # Wrapper –∑–∞ minimalmodbus
‚îî‚îÄ‚îÄ (–¥—Ä—É–≥–∏ Modbus –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏)
```
### Storage (–ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–∏ –î–∞–Ω–Ω–∏)
```
~/.cache/cobot-glue-dispensing-v5/
‚îî‚îÄ‚îÄ glue_dispensing_application/
    ‚îî‚îÄ‚îÄ storage/
        ‚îî‚îÄ‚îÄ settings/
            ‚îî‚îÄ‚îÄ modbus_config.json     # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–µ–Ω —Ñ–∞–π–ª
```
---
## API Endpoints
### 1. MODBUS_CONFIG_GET
**–ü—ä—Ç:** `/api/v1/settings/modbus/config`  
**–ú–µ—Ç–æ–¥:** GET  
**–¶–µ–ª:** –ó–∞—Ä–µ–∂–¥–∞–Ω–µ –Ω–∞ –ø—ä–ª–Ω–∞—Ç–∞ Modbus –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
**Request:**
```python
controller.requestSender.send_request(modbus_endpoints.MODBUS_CONFIG_GET)
```
**Response (Success):**
```json
{
  "status": "success",
  "data": {
    "port": "COM5",
    "baudrate": 115200,
    "bytesize": 8,
    "stopbits": 1,
    "parity": "N",
    "timeout": 0.01,
    "slave_address": 10,
    "max_retries": 30
  }
}
```
**Response (Error):**
```json
{
  "status": "error",
  "message": "Error loading Modbus configuration: [error details]"
}
```
**Handler:** `SettingsDispatcher.handle_modbus_settings()`
```python
modbus_repo = ModbusSettingsRepository(file_path=str(config_path))
config = modbus_repo.load()
return Response(Constants.RESPONSE_STATUS_SUCCESS, data=config.to_dict()).to_dict()
```
---
### 2. MODBUS_CONFIG_UPDATE
**–ü—ä—Ç:** `/api/v1/settings/modbus/config/update`  
**–ú–µ—Ç–æ–¥:** POST  
**–¶–µ–ª:** –ê–∫—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞ –æ—Ç–¥–µ–ª–Ω–æ –ø–æ–ª–µ –æ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è—Ç–∞
**Request:**
```python
controller.requestSender.send_request(
    modbus_endpoints.MODBUS_CONFIG_UPDATE,
    data={'field': 'baudrate', 'value': 57600}
)
```
**Request Data Schema:**
```json
{
  "field": "baudrate",     // –∏–º–µ –Ω–∞ –ø–æ–ª–µ—Ç–æ
  "value": 57600           // –Ω–æ–≤–∞ —Å—Ç–æ–π–Ω–æ—Å—Ç
}
```
**–í–∞–ª–∏–¥–Ω–∏ –ü–æ–ª–µ—Ç–∞:**
- `port` (string)
- `baudrate` (int)
- `bytesize` (int)
- `stopbits` (int)
- `parity` (string: 'N', 'E', 'O', 'M', 'S')
- `timeout` (float)
- `slave_address` (int)
- `max_retries` (int)
**Response (Success):**
```json
{
  "status": "success",
  "message": "Modbus baudrate updated successfully"
}
```
**Response (Error - Missing Fields):**
```json
{
  "status": "error",
  "message": "Missing required fields: field and value"
}
```
**Handler:**
```python
field = data['field']
value = data['value']
modbus_repo.update_field(field, value)
```
---
### 3. MODBUS_TEST_CONNECTION
**–ü—ä—Ç:** `/api/v1/settings/modbus/test`  
**–ú–µ—Ç–æ–¥:** POST  
**–¶–µ–ª:** –¢–µ—Å—Ç–≤–∞–Ω–µ –Ω–∞ –≤—Ä—ä–∑–∫–∞—Ç–∞ —Å —Ç–µ–∫—É—â–∞—Ç–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
**Request:**
```python
controller.requestSender.send_request(modbus_endpoints.MODBUS_TEST_CONNECTION)
```
**Response (Success):**
```json
{
  "status": "success",
  "message": "Successfully connected to Modbus slave at COM5"
}
```
**Response (Error):**
```json
{
  "status": "error",
  "message": "Connection test failed: [Errno 2] No such file or directory: 'COM5'"
}
```
**Handler –õ–æ–≥–∏–∫–∞:**
```python
config = modbus_repo.load()
# –°—ä–∑–¥–∞–≤–∞ —Ç–µ—Å—Ç–æ–≤ Modbus –∫–ª–∏–µ–Ω—Ç
test_client = ModbusClient(
    slave=config.slave_address,
    port=config.port,
    baudrate=config.baudrate,
    bytesize=config.bytesize,
    stopbits=config.stopbits,
    timeout=config.timeout,
    parity=parity_map.get(config.parity),
    max_retries=config.max_retries
)
# –ó–∞—Ç–≤–∞—Ä—è –≤—Ä—ä–∑–∫–∞—Ç–∞ —Å–ª–µ–¥ —Ç–µ—Å—Ç–∞
test_client.client.serial.close()
```
---
### 4. MODBUS_GET_AVAILABLE_PORT
**–ü—ä—Ç:** `/api/v1/settings/modbus/available/port`  
**–ú–µ—Ç–æ–¥:** GET  
**–¶–µ–ª:** –û—Ç–∫—Ä–∏–≤–∞–Ω–µ –Ω–∞ –Ω–∞–ª–∏—á–µ–Ω —Å–µ—Ä–∏–µ–Ω –ø–æ—Ä—Ç –≤ —Å–∏—Å—Ç–µ–º–∞—Ç–∞
**Request:**
```python
controller.requestSender.send_request(modbus_endpoints.MODBUS_GET_AVAILABLE_PORT)
```
**Response (Success - Port Found):**
```json
{
  "status": "success",
  "data": {
    "port": "/dev/ttyUSB0"
  },
  "message": "Detected Modbus port: /dev/ttyUSB0"
}
```
**Response (Error - No Port):**
```json
{
  "status": "error",
  "message": "No Modbus port detected. Please ensure the device is connected."
}
```
**Handler –õ–æ–≥–∏–∫–∞:**
```python
if platform.system() == "Windows":
    port = "COM5"
else:
    from modules.shared.utils.linuxUtils import get_modbus_port
    port = get_modbus_port(sudo_password="plp")
    if not port or port.strip() == "":
        return Response(
            Constants.RESPONSE_STATUS_ERROR,
            message="No Modbus port detected..."
        ).to_dict()
return Response(
    Constants.RESPONSE_STATUS_SUCCESS,
    data={"port": port},
    message=f"Detected Modbus port: {port}"
).to_dict()
```
---
## –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–∏
### 1. ModbusConfig (–ú–æ–¥–µ–ª)
**–§–∞–π–ª:** `src/core/model/settings/modbusConfig/modbusConfigModel.py`
**–û–ø–∏—Å–∞–Ω–∏–µ:** Dataclass, –ø—Ä–µ–¥—Å—Ç–∞–≤—è—â Modbus –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å —Ç–∏–ø–æ–≤–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç.
**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**
```python
@dataclass
class ModbusConfig:
    port: str = 'COM5'              # –°–µ—Ä–∏–µ–Ω –ø–æ—Ä—Ç (COM5, /dev/ttyUSB0)
    baudrate: int = 115200          # –°–∫–æ—Ä–æ—Å—Ç (9600, 19200, 38400, 57600, 115200)
    bytesize: int = 8               # Data bits (5, 6, 7, 8)
    stopbits: int = 1               # Stop bits (1, 1.5, 2)
    parity: str = 'N'               # Parity (N, E, O, M, S)
    timeout: float = 0.01           # Timeout –≤ —Å–µ–∫—É–Ω–¥–∏
    slave_address: int = 10         # Modbus slave –∞–¥—Ä–µ—Å (1-247)
    max_retries: int = 30           # –ú–∞–∫—Å–∏–º–∞–ª–µ–Ω –±—Ä–æ–π –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è
```
**–ú–µ—Ç–æ–¥–∏:**
```python
# –°—ä–∑–¥–∞–≤–∞–Ω–µ –æ—Ç dictionary
config = ModbusConfig.from_dict({
    'port': '/dev/ttyUSB0',
    'baudrate': 57600
})
# –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–∞–Ω–µ –∫—ä–º dictionary
config_dict = config.to_dict()
# –ê–∫—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞ –ø–æ–ª–µ
config.update_field('baudrate', 115200)
```
**–í–∞–ª–∏–¥–∞—Ü–∏—è:**
- –•–≤—ä—Ä–ª—è `ValueError` –ø—Ä–∏ –æ–ø–∏—Ç –∑–∞ –∞–∫—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞ –Ω–µ—Å—ä—â–µ—Å—Ç–≤—É–≤–∞—â–æ –ø–æ–ª–µ
- Type hints –≥–∞—Ä–∞–Ω—Ç–∏—Ä–∞—Ç —Ç–∏–ø–æ–≤–∞ –∫–æ—Ä–µ–∫—Ç–Ω–æ—Å—Ç
---
### 2. ModbusSettingsRepository (Repository)
**–§–∞–π–ª:** `src/core/database/settings/ModbusSettingsRepository.py`
**–û–ø–∏—Å–∞–Ω–∏–µ:** –£–ø—Ä–∞–≤–ª—è–≤–∞ –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Ç–æ —Å—ä—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞ Modbus –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è.
**–ù–∞—Å–ª–µ–¥—è–≤–∞:** `BaseJsonSettingsRepository[ModbusConfig]`
**–ü—É–±–ª–∏—á–Ω–∏ –ú–µ—Ç–æ–¥–∏:**
#### load() ‚Üí ModbusConfig
–ó–∞—Ä–µ–∂–¥–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è—Ç–∞ –æ—Ç JSON —Ñ–∞–π–ª–∞.
```python
repo = ModbusSettingsRepository(file_path="/path/to/modbus_config.json")
config = repo.load()  # –í—Ä—ä—â–∞ ModbusConfig –æ–±–µ–∫—Ç
```
**–ü–æ–≤–µ–¥–µ–Ω–∏–µ:**
- –ê–∫–æ —Ñ–∞–π–ª—ä—Ç –Ω–µ —Å—ä—â–µ—Å—Ç–≤—É–≤–∞ ‚Üí —Å—ä–∑–¥–∞–≤–∞ –≥–æ —Å default —Å—Ç–æ–π–Ω–æ—Å—Ç–∏
- –ê–∫–æ —Ñ–∞–π–ª—ä—Ç –µ –ø–æ–≤—Ä–µ–¥–µ–Ω ‚Üí –≤—Ä—ä—â–∞ default –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø—Ä–∏–Ω—Ç–∏—Ä–∞ —Å—ä–æ–±—â–µ–Ω–∏—è –∑–∞ –¥–µ–±—ä–≥
#### save(config: ModbusConfig) ‚Üí None
–ó–∞–ø–∞–∑–≤–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è—Ç–∞ –≤ JSON —Ñ–∞–π–ª–∞.
```python
config = ModbusConfig(baudrate=57600)
repo.save(config)
```
**–ü–æ–≤–µ–¥–µ–Ω–∏–µ:**
- –°—ä–∑–¥–∞–≤–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏—Ç–µ, –∞–∫–æ –Ω–µ —Å—ä—â–µ—Å—Ç–≤—É–≤–∞—Ç
- –§–æ—Ä–º–∞—Ç–∏—Ä–∞ JSON —Å indentation
- –•–≤—ä—Ä–ª—è `SettingsSaveError` –ø—Ä–∏ –≥—Ä–µ—à–∫–∞
#### update_field(field: str, value: Any) ‚Üí None
–ê–∫—Ç—É–∞–ª–∏–∑–∏—Ä–∞ –æ—Ç–¥–µ–ª–Ω–æ –ø–æ–ª–µ.
```python
repo.update_field('baudrate', 115200)
```
**–ü–æ–≤–µ–¥–µ–Ω–∏–µ:**
1. –ó–∞—Ä–µ–∂–¥–∞ —Ç–µ–∫—É—â–∞—Ç–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
2. –ê–∫—Ç—É–∞–ª–∏–∑–∏—Ä–∞ –ø–æ–ª–µ—Ç–æ
3. –ó–∞–ø–∞–∑–≤–∞ –æ–±—Ä–∞—Ç–Ω–æ
#### exists() ‚Üí bool
–ü—Ä–æ–≤–µ—Ä—è–≤–∞ –¥–∞–ª–∏ —Ñ–∞–π–ª—ä—Ç —Å—ä—â–µ—Å—Ç–≤—É–≤–∞.
```python
if repo.exists():
    config = repo.load()
else:
    config = repo.get_default()
```
---
### 3. SettingsDispatcher (Handler)
**–§–∞–π–ª:** `src/communication_layer/api_gateway/dispatch/settings_dispatcher.py`
**–û–ø–∏—Å–∞–Ω–∏–µ:** –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∏—Ä–∞ –∏ –æ–±—Ä–∞–±–æ—Ç–≤–∞ Modbus –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∑–∞—è–≤–∫–∏.
**–ú–µ—Ç–æ–¥:** `handle_modbus_settings(parts, request, data=None)`
**–ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è:**
```python
if request == modbus_endpoints.MODBUS_CONFIG_GET:
    # –ó–∞—Ä–µ–∂–¥–∞–Ω–µ –Ω–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
elif request == modbus_endpoints.MODBUS_CONFIG_UPDATE:
    # –ê–∫—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞ –ø–æ–ª–µ
elif request == modbus_endpoints.MODBUS_TEST_CONNECTION:
    # –¢–µ—Å—Ç–≤–∞–Ω–µ –Ω–∞ –≤—Ä—ä–∑–∫–∞
elif request == modbus_endpoints.MODBUS_GET_AVAILABLE_PORT:
    # –û—Ç–∫—Ä–∏–≤–∞–Ω–µ –Ω–∞ –ø–æ—Ä—Ç
```
**–í—ä–∑–≤—Ä—ä—â–∞–µ–º–∞ –°—Ç–æ–π–Ω–æ—Å—Ç:** `dict` (Response.to_dict())
```python
{
    "status": "success" | "error",
    "data": {...},           # optional
    "message": "..."         # optional
}
```
---
### 4. ModbusConnectionTab (UI)
**–§–∞–π–ª:** `src/plugins/core/modbus_settings_plugin/ui/ModbusConnectionTab.py`
**–û–ø–∏—Å–∞–Ω–∏–µ:** UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∑–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–∞–Ω–µ –Ω–∞ Modbus –≤—Ä—ä–∑–∫–∞—Ç–∞.
**–°–µ–∫—Ü–∏–∏:**
#### Connection Group
- **Serial Port** - Text input + "Detect Port" –±—É—Ç–æ–Ω
- **Baudrate** - Dropdown (9600, 19200, 38400, 57600, 115200, 230400)
- **Data Bits** - Dropdown (5, 6, 7, 8)
- **Stop Bits** - Dropdown (1, 1.5, 2)
- **Parity** - Dropdown (None, Even, Odd, Mark, Space)
#### Modbus Settings Group
- **Slave Address** - SpinBox (1-247)
- **Timeout** - DoubleSpinBox (0.001-10.0 seconds)
- **Max Retries** - SpinBox (1-100)
#### Connection Test Group
- **Test Connection** - –ë—É—Ç–æ–Ω –∑–∞ —Ç–µ—Å—Ç–≤–∞–Ω–µ
- **Status Label** - –ü–æ–∫–∞–∑–≤–∞ —Ä–µ–∑—É–ª—Ç–∞—Ç –æ—Ç —Ç–µ—Å—Ç–∞
**Auto-Save:**
–í—Å—è–∫–∞ –ø—Ä–æ–º—è–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Å–µ –∑–∞–ø–∞–∑–≤–∞ —á—Ä–µ–∑ `_on_field_changed()`:
```python
self.baudrate_dropdown.currentTextChanged.connect(
    lambda: self._on_field_changed('baudrate', int(self.baudrate_dropdown.currentText()))
)
```
**Toast Notifications:**
```python
self.showToast("‚úÖ Baudrate updated")
self.showToast("‚ùå Connection test failed")
```
---
### 5. ModbusController (Factory)
**–§–∞–π–ª:** `src/modules/modbusCommunication/ModbusController.py`
**–û–ø–∏—Å–∞–Ω–∏–µ:** Factory –∫–ª–∞—Å –∑–∞ —Å—ä–∑–¥–∞–≤–∞–Ω–µ –Ω–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–∞–Ω–∏ Modbus –∫–ª–∏–µ–Ω—Ç–∏.
**–ü—É–±–ª–∏—á–µ–Ω –ú–µ—Ç–æ–¥:**
```python
@classmethod
def getModbusClient(cls, slaveId: int) -> ModbusClient:
    """
    –°—ä–∑–¥–∞–≤–∞ –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–∞ ModbusClient —Å–ø–æ—Ä–µ–¥ –∑–∞–ø–∞–∑–µ–Ω–∞—Ç–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è.
    """
    config = get_config_from_settings()
    client = ModbusClient(slave=slaveId, port=config.port, max_retries=config.max_retries)
    client.client.serial.baudrate = config.baudrate
    client.client.serial.bytesize = config.byte_size
    client.client.serial.parity = config.parity.value
    # ... –∏ –¥—Ä—É–≥–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
    return client
```
**–ò–∑–ø–æ–ª–∑–≤–∞–Ω–µ:**
```python
from modules.modbusCommunication import ModbusController
# –°—ä–∑–¥–∞–≤–∞–Ω–µ –Ω–∞ –∫–ª–∏–µ–Ω—Ç –∑–∞ slave —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ —Å ID 10
client = ModbusController.getModbusClient(slaveId=10)
# –ß–µ—Ç–µ–Ω–µ –Ω–∞ holding register
value = client.read_holding_register(address=0)
```
**–í—ä—Ç—Ä–µ—à–Ω–∏ –§—É–Ω–∫—Ü–∏–∏:**
#### load_modbus_config_from_repo() ‚Üí ModbusConfig
```python
modbus_repo = ModbusSettingsRepository(file_path=str(config_path))
config = modbus_repo.load()
return config
```
#### get_config_from_settings() ‚Üí ModbusClientConfig
```python
settings = load_modbus_config_from_repo()
# –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–∞–Ω–µ –∫—ä–º ModbusClientConfig
return ModbusClientConfig(
    slave_id=settings.slave_address,
    port=settings.port,
    baudrate=settings.baudrate,
    # ...
)
```
**Port Resolution (Linux):**
```python
port = settings.port
if port.startswith('COM'):
    # –ù–∞ Linux –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–∞ 'COM5' ‚Üí '/dev/ttyUSB0'
    port = get_modbus_port(sudo_password=SUDO_PASS)
```
---
## –ü—Ä–∏–º–µ—Ä–∏ –∑–∞ –ò–∑–ø–æ–ª–∑–≤–∞–Ω–µ
### –ü—Ä–∏–º–µ—Ä 1: –ó–∞—Ä–µ–∂–¥–∞–Ω–µ –∏ –ü–æ–∫–∞–∑–≤–∞–Ω–µ –Ω–∞ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
```python
# –í UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
from communication_layer.api.v1.endpoints import modbus_endpoints
from communication_layer.api.v1.Response import Response
# –ò–∑–ø—Ä–∞—â–∞–Ω–µ –Ω–∞ –∑–∞—è–≤–∫–∞
controller = self.controller_service.get_controller()
response_dict = controller.requestSender.send_request(modbus_endpoints.MODBUS_CONFIG_GET)
response = Response.from_dict(response_dict)
if response.status == 'success':
    config = response.data
    print(f"Port: {config['port']}")
    print(f"Baudrate: {config['baudrate']}")
    print(f"Slave Address: {config['slave_address']}")
else:
    print(f"Error: {response.message}")
```
---
### –ü—Ä–∏–º–µ—Ä 2: –ü—Ä–æ–º—è–Ω–∞ –Ω–∞ Baudrate
```python
# –ò–∑–ø—Ä–∞—â–∞–Ω–µ –Ω–∞ update –∑–∞—è–≤–∫–∞
request_data = {
    'field': 'baudrate',
    'value': 57600
}
response_dict = controller.requestSender.send_request(
    modbus_endpoints.MODBUS_CONFIG_UPDATE,
    data=request_data
)
response = Response.from_dict(response_dict)
if response.status == 'success':
    print("‚úÖ Baudrate updated to 57600")
else:
    print(f"‚ùå Update failed: {response.message}")
```
---
### –ü—Ä–∏–º–µ—Ä 3: –û—Ç–∫—Ä–∏–≤–∞–Ω–µ –Ω–∞ –ù–∞–ª–∏—á–µ–Ω –ü–æ—Ä—Ç
```python
# –û—Ç–∫—Ä–∏–≤–∞–Ω–µ –Ω–∞ –ø–æ—Ä—Ç
response_dict = controller.requestSender.send_request(
    modbus_endpoints.MODBUS_GET_AVAILABLE_PORT
)
response = Response.from_dict(response_dict)
if response.status == 'success':
    detected_port = response.data['port']
    print(f"‚úÖ Detected port: {detected_port}")
    # –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∞–∫—Ç—É–∞–ª–∏–∑–∏—Ä–∞–Ω–µ –Ω–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è—Ç–∞
    update_data = {'field': 'port', 'value': detected_port}
    controller.requestSender.send_request(
        modbus_endpoints.MODBUS_CONFIG_UPDATE,
        data=update_data
    )
else:
    print(f"‚ùå No port detected: {response.message}")
```
---
### –ü—Ä–∏–º–µ—Ä 4: –¢–µ—Å—Ç–≤–∞–Ω–µ –Ω–∞ –í—Ä—ä–∑–∫–∞
```python
# –¢–µ—Å—Ç–≤–∞–Ω–µ –Ω–∞ –≤—Ä—ä–∑–∫–∞—Ç–∞
response_dict = controller.requestSender.send_request(
    modbus_endpoints.MODBUS_TEST_CONNECTION
)
response = Response.from_dict(response_dict)
if response.status == 'success':
    print(f"‚úÖ {response.message}")
    # "Successfully connected to Modbus slave at /dev/ttyUSB0"
else:
    print(f"‚ùå Connection failed: {response.message}")
```
---
### –ü—Ä–∏–º–µ—Ä 5: –î–∏—Ä–µ–∫—Ç–Ω–æ –ò–∑–ø–æ–ª–∑–≤–∞–Ω–µ –Ω–∞ Repository
```python
from pathlib import Path
from core.application.ApplicationStorageResolver import get_app_settings_path
from core.database.settings.ModbusSettingsRepository import ModbusSettingsRepository
from core.model.settings.modbusConfig.modbusConfigModel import ModbusConfig
# –°—ä–∑–¥–∞–≤–∞–Ω–µ –Ω–∞ repository
config_path = Path(get_app_settings_path("glue_dispensing_application", "modbus_config"))
repo = ModbusSettingsRepository(file_path=str(config_path))
# –ó–∞—Ä–µ–∂–¥–∞–Ω–µ
config = repo.load()
print(f"Current port: {config.port}")
# –ü—Ä–æ–º—è–Ω–∞
config.port = "/dev/ttyUSB1"
config.baudrate = 57600
# –ó–∞–ø–∞–∑–≤–∞–Ω–µ
repo.save(config)
print("‚úÖ Configuration saved")
# –ò–ª–∏ –¥–∏—Ä–µ–∫—Ç–Ω–∞ –∞–∫—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞ –ø–æ–ª–µ
repo.update_field('slave_address', 15)
print("‚úÖ Slave address updated to 15")
```
---
### –ü—Ä–∏–º–µ—Ä 6: –°—ä–∑–¥–∞–≤–∞–Ω–µ –Ω–∞ Modbus –ö–ª–∏–µ–Ω—Ç
```python
from modules.modbusCommunication import ModbusController
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∏–∑–ø–æ–ª–∑–≤–∞ –∑–∞–ø–∞–∑–µ–Ω–∞—Ç–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
client = ModbusController.getModbusClient(slaveId=10)
# –ß–µ—Ç–µ–Ω–µ –Ω–∞ holding register
try:
    value = client.read_holding_register(address=100)
    print(f"Register 100 value: {value}")
except Exception as e:
    print(f"Read failed: {e}")
# –ü–∏—Å–∞–Ω–µ –Ω–∞ holding register
try:
    client.write_holding_register(address=200, value=1500)
    print("‚úÖ Register 200 written successfully")
except Exception as e:
    print(f"Write failed: {e}")
```
---
## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–µ–Ω –§–∞–π–ª
**–õ–æ–∫–∞—Ü–∏—è:** `~/.cache/cobot-glue-dispensing-v5/glue_dispensing_application/storage/settings/modbus_config.json`
**–ü—ä–ª–µ–Ω –ø—ä—Ç (resol–≤–∞ —Å–µ –¥–∏–Ω–∞–º–∏—á–Ω–æ):**
```python
from core.application.ApplicationStorageResolver import get_app_settings_path
config_path = get_app_settings_path("glue_dispensing_application", "modbus_config")
# –†–µ–∑—É–ª—Ç–∞—Ç: ~/.cache/.../glue_dispensing_application/storage/settings/modbus_config.json
```
**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –Ω–∞ JSON:**
```json
{
  "port": "COM5",
  "baudrate": 115200,
  "bytesize": 8,
  "stopbits": 1,
  "parity": "N",
  "timeout": 0.01,
  "slave_address": 10,
  "max_retries": 30
}
```
**–ü–æ–ª–µ—Ç–∞:**
| –ü–æ–ª–µ | –¢–∏–ø | –í–∞–ª–∏–¥–Ω–∏ –°—Ç–æ–π–Ω–æ—Å—Ç–∏ | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----|-------------------|----------|
| `port` | string | "COM5", "/dev/ttyUSB0" | –°–µ—Ä–∏–µ–Ω –ø–æ—Ä—Ç |
| `baudrate` | int | 9600, 19200, 38400, 57600, 115200, 230400 | –°–∫–æ—Ä–æ—Å—Ç –≤ bps |
| `bytesize` | int | 5, 6, 7, 8 | –ë—Ä–æ–π data bits |
| `stopbits` | int | 1, 2 | –ë—Ä–æ–π stop bits |
| `parity` | string | 'N', 'E', 'O', 'M', 'S' | Parity –∫–æ–Ω—Ç—Ä–æ–ª |
| `timeout` | float | 0.001 - 10.0 | Timeout –≤ —Å–µ–∫—É–Ω–¥–∏ |
| `slave_address` | int | 1 - 247 | Modbus slave –∞–¥—Ä–µ—Å |
| `max_retries` | int | 1 - 100 | –ú–∞–∫—Å–∏–º–∞–ª–µ–Ω –±—Ä–æ–π –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è |
**Parity —Å—Ç–æ–π–Ω–æ—Å—Ç–∏:**
- `N` - None (–±–µ–∑ parity)
- `E` - Even (—á–µ—Ç–µ–Ω parity)
- `O` - Odd (–Ω–µ—á–µ—Ç–µ–Ω parity)
- `M` - Mark (–≤–∏–Ω–∞–≥–∏ 1)
- `S` - Space (–≤–∏–Ω–∞–≥–∏ 0)
---
## –ì—Ä–µ—à–∫–∏ –∏ –û–±—Ä–∞–±–æ—Ç–∫–∞
### –¢–∏–ø–∏—á–Ω–∏ –ì—Ä–µ—à–∫–∏
#### 1. –õ–∏–ø—Å–≤–∞—â –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–µ–Ω –§–∞–π–ª
**–°–∏–º–ø—Ç–æ–º:** –§–∞–π–ª—ä—Ç `modbus_config.json` –Ω–µ —Å—ä—â–µ—Å—Ç–≤—É–≤–∞
**–ü–æ–≤–µ–¥–µ–Ω–∏–µ:**
```
Settings file not found: ~/.cache/.../modbus_config.json. Created with defaults.
```
**–†–µ—à–µ–Ω–∏–µ:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Å–µ —Å—ä–∑–¥–∞–≤–∞ —Å default —Å—Ç–æ–π–Ω–æ—Å—Ç–∏
---
#### 2. –ü–æ–≤—Ä–µ–¥–µ–Ω JSON
**–°–∏–º–ø—Ç–æ–º:** JSON —Ñ–∞–π–ª—ä—Ç –µ –Ω–µ–≤–∞–ª–∏–¥–µ–Ω
**–ü–æ–≤–µ–¥–µ–Ω–∏–µ:**
```
Failed to load modbus_config settings: Expecting property name enclosed in double quotes
```
**–†–µ—à–µ–Ω–∏–µ:** –í—Ä—ä—â–∞ default –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è, —Ñ–∞–π–ª—ä—Ç —Ç—Ä—è–±–≤–∞ –¥–∞ —Å–µ –ø–æ–ø—Ä–∞–≤–∏ —Ä—ä—á–Ω–æ
---
#### 3. –õ–∏–ø—Å–≤–∞—â–∏ –ü–æ–ª–µ—Ç–∞
**–°–∏–º–ø—Ç–æ–º:** UPDATE –∑–∞—è–≤–∫–∞ –±–µ–∑ `field` –∏ `value`
**Response:**
```json
{
  "status": "error",
  "message": "Missing required fields: field and value"
}
```
**–†–µ—à–µ–Ω–∏–µ:** –£–≤–µ—Ä–µ—Ç–µ —Å–µ, —á–µ data —Å—ä–¥—ä—Ä–∂–∞ `{'field': '...', 'value': ...}`
---
#### 4. –ù–µ–≤–∞–ª–∏–¥–Ω–æ –ü–æ–ª–µ
**–°–∏–º–ø—Ç–æ–º:** –û–ø–∏—Ç –∑–∞ –∞–∫—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞ –Ω–µ—Å—ä—â–µ—Å—Ç–≤—É–≤–∞—â–æ –ø–æ–ª–µ
**–ì—Ä–µ—à–∫–∞:**
```
ValueError: Invalid field: invalid_field_name
```
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä–µ—Ç–µ –≤–∞–ª–∏–¥–Ω–∏—Ç–µ –∏–º–µ–Ω–∞ –Ω–∞ –ø–æ–ª–µ—Ç–∞ –≤ ModbusConfig
---
#### 5. Connection Test Failed
**–°–∏–º–ø—Ç–æ–º:** Modbus —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ—Ç–æ –Ω–µ –æ—Ç–≥–æ–≤–∞—Ä—è
**Response:**
```json
{
  "status": "error",
  "message": "Connection test failed: [Errno 2] No such file or directory: 'COM5'"
}
```
**–ü—Ä–∏—á–∏–Ω–∏:**
- –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ—Ç–æ –Ω–µ –µ —Å–≤—ä—Ä–∑–∞–Ω–æ
- –ì—Ä–µ—à–µ–Ω –ø–æ—Ä—Ç
- –ì—Ä–µ—à–Ω–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (baudrate, parity, –∏ —Ç.–Ω.)
- –õ–∏–ø—Å–∞ –Ω–∞ –ø—Ä–∞–≤–∞ –∑–∞ –¥–æ—Å—Ç—ä–ø –¥–æ –ø–æ—Ä—Ç–∞
**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä–µ—Ç–µ —Ñ–∏–∑–∏—á–µ—Å–∫–∞—Ç–∞ –≤—Ä—ä–∑–∫–∞
2. –ò–∑–ø–æ–ª–∑–≤–∞–π—Ç–µ "Detect Port" –∑–∞ –æ—Ç–∫—Ä–∏–≤–∞–Ω–µ
3. –ü—Ä–æ–≤–µ—Ä–µ—Ç–µ –ø—Ä–∞–≤–∞—Ç–∞ –∑–∞ –¥–æ—Å—Ç—ä–ø: `sudo chmod 666 /dev/ttyUSB0`
---
#### 6. No Port Detected
**–°–∏–º–ø—Ç–æ–º:** –°–∏—Å—Ç–µ–º–∞—Ç–∞ –Ω–µ –º–æ–∂–µ –¥–∞ –æ—Ç–∫—Ä–∏–µ Modbus —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ
**Response:**
```json
{
  "status": "error",
  "message": "No Modbus port detected. Please ensure the device is connected."
}
```
**–†–µ—à–µ–Ω–∏–µ:**
1. –°–≤—ä—Ä–∂–µ—Ç–µ Modbus —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ—Ç–æ
2. –ü—Ä–æ–≤–µ—Ä–µ—Ç–µ —Å `ls -l /dev/ttyUSB*`
3. –ü—Ä–æ–≤–µ—Ä–µ—Ç–µ dmesg –∑–∞ USB —Å—ä–±–∏—Ç–∏—è: `dmesg | tail`
---
## –†–∞–∑—à–∏—Ä–µ–Ω–∏—è –∏ –ë—ä–¥–µ—â–æ –†–∞–∑–≤–∏—Ç–∏–µ
### –ü–ª–∞–Ω–∏—Ä–∞–Ω–∏ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–Ω–æ—Å—Ç–∏
1. **Device Registry**
   - –ó–∞–ø–∞–∑–≤–∞–Ω–µ –Ω–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ —Å —Ä–∞–∑–ª–∏—á–Ω–∏ slave ID
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –æ—Ç–∫—Ä–∏–≤–∞–Ω–µ –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –Ω–∞ bus-–∞
   - Device templates —Å –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª–Ω–æ –¥–µ—Ñ–∏–Ω–∏—Ä–∞–Ω–∏ register –∫–∞—Ä—Ç–∏
2. **Connection Pool**
   - –°–ø–æ–¥–µ–ª—è–Ω–µ –Ω–∞ –≤—Ä—ä–∑–∫–∞ –º–µ–∂–¥—É –º–Ω–æ–∂–µ—Å—Ç–≤–æ –∫–ª–∏–µ–Ω—Ç–∏
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ reconnect –ø—Ä–∏ –∑–∞–≥—É–±–∞ –Ω–∞ –≤—Ä—ä–∑–∫–∞
   - Connection health monitoring
3. **Logging & Monitoring**
   - –ò—Å—Ç–æ—Ä–∏—è –Ω–∞ –∫–æ–º—É–Ω–∏–∫–∞—Ü–∏—è—Ç–∞
   - Performance metrics (response time, error rate)
   - Real-time Modbus traffic visualization
4. **Advanced Testing**
   - Bulk register read/write —Ç–µ—Å—Ç–æ–≤–µ
   - Protocol analyzer
   - Connection stress testing
5. **Configuration Profiles**
   - –ú–Ω–æ–∂–µ—Å—Ç–≤–æ –ø—Ä–æ—Ñ–∏–ª–∏ –∑–∞ —Ä–∞–∑–ª–∏—á–Ω–∏ setup-–∏
   - Import/Export –Ω–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
   - Configuration versioning
---
## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ
Modbus –Ω–∞—Å—Ç—Ä–æ–π–∫–∏—Ç–µ –∏–º–ø–ª–µ–º–µ–Ω—Ç–∏—Ä–∞—Ç –ø—ä–ª–µ–Ω stack –æ—Ç UI –¥–æ –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ —Å—ä—Ö—Ä–∞–Ω–µ–Ω–∏–µ, —Å–ª–µ–¥–≤–∞–π–∫–∏ best practices:
‚úÖ **Repository Pattern** - –ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ —Å –æ—Å—Ç–∞–Ω–∞–ª–∏—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏  
‚úÖ **Type Safety** - Dataclass –º–æ–¥–µ–ª–∏ —Å type hints  
‚úÖ **Auto-Save** - –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–∞–ø–∞–∑–≤–∞–Ω–µ –ø—Ä–∏ –ø—Ä–æ–º—è–Ω–∞  
‚úÖ **Error Handling** - Graceful fallback –ø—Ä–∏ –≥—Ä–µ—à–∫–∏  
‚úÖ **User-Friendly UI** - –ò–Ω—Ç—É–∏—Ç–∏–≤–µ–Ω –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å toast –Ω–æ—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏  
‚úÖ **Port Detection** - –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –æ—Ç–∫—Ä–∏–≤–∞–Ω–µ –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞  
‚úÖ **Connection Testing** - –í–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–µ–¥–∏ –∏–∑–ø–æ–ª–∑–≤–∞–Ω–µ  
–°–∏—Å—Ç–µ–º–∞—Ç–∞ –µ –≥–æ—Ç–æ–≤–∞ –∑–∞ production –∏–∑–ø–æ–ª–∑–≤–∞–Ω–µ! üéâ
---
**–í–µ—Ä—Å–∏—è:** 1.0  
**–î–∞—Ç–∞:** 10 –î–µ–∫–µ–º–≤—Ä–∏ 2025  
**–ê–≤—Ç–æ—Ä:** Cobot Glue Dispensing System Team
